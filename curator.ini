[service]
collection_path = /home/wxy/livefire/collection

[transform]
name = unzip
include = file_path /\.zip$/i
exec = /usr/bin/unzip
args = -o {from} -d {to}
consume = yes

[store]
name = pictures
include = %kind picture
include = file_extension /^(?:jpe?g|gif|a?png|bmp|tiff)$/i
path = /home/wxy/livefire/pictures/{group_id}-{index}.{file_extension}
thumbnail_path = /home/wxy/livefire/pictures/.thumbnails/{group_id}-{index}
thumbnail_resolution = 128
thumbnail_aspect = 1x1

[store]
name = manga
include = %kind page
include = file_extension /^(?:jpe?g|gif|a?png|bmp|tiff)$/i
path = /home/wxy/livefire/manga/{title}/{index}.{file_extension}
thumbnail_path = /home/wxy/livefire/manga/.thumbnails/{title}/{file_name}
thumbnail_resolution = 256

[hopper]
path = /home/wxy/livefire
include = file_name /(.+?)\.(?:jpe?g|gif|a?png|bmp|tiff|webm)$/i title
phash_threshold = 6
transform = unzip
store = pictures
store = manga
save = title
%kind = picture
save = kind

[hopper]
path = /home/wxy/livefire
include = file_stem /(.+?)(?:\s*\((?:english|raw)\))?$/i title
include = file_extension zip
phash_threshold = 16
transform = unzip
store = pictures
store = manga
save = title
%kind = page
save = kind

[hopper]
path = /home/wxy/livefire
include = source_type directory
include = file_name /\.commit$/
phash_threshold = 16
store = pictures
%kind = picture
save = kind
